# mypkg

ROS2を用いて数値と演算子を動的に設定し、計算式を送信・実行するパッケージです。

### ノード
* **Talker**: カウント変数とパラメータ（演算子・数値）を組み合わせて計算式（例: `"0 + 5"`）を生成し送信します。
* **Listener**: std_msgs/msg/string型のメッセージを受信し、受け取った文字列を計算式として評価します。Talkerだけでなく、コマンドラインや他のノードから送信されたメッセージも処理可能です。

## トピック
* **/formula_cmd**
    * **型**: `std_msgs/msg/String`
    * **データ**: 計算式を含む文字列（例: `"0 + 5"`, `"10 * 2"`）

### 実行方法

本パッケージは、ノード単体で起動して他のパッケージと連携することが可能です。

### 1. 受信ノード（listener）の起動
計算式待ち受け状態になります。
```
ros2 run mypkg listener
```

###2. 送信ノード（talker）の起動
別の端末で以下を実行すると、テスト用の計算式が送信されます。
```
ros2 run mypkg talker
```

Launchファイルによる一括起動（デモ用）
動作確認のために、両方のノードを同時に起動することも可能です。

```bash
ros2 launch mypkg talk_listen.launch.py
```

実行後、以下のように計算結果が出力されます。

```
[listener]: Listen: "0 + 5" -> Answer: 5
[listener]: Listen: "1 + 5" -> Answer: 6
```

パラメータの変更方法や、個別のノード実行方法などの詳細は USAGE.md を参照してください。

### 必要なソフトウェア

* Python
* ROS2 Humble Hawksbill

### テスト環境

* Ubuntu 22.04

### ライセンス

* このソフトウェアパッケージは、3条項BSDライセンスの下、再頒布および使用が許可されます。
* © 2025 Rikuto Hoshi
